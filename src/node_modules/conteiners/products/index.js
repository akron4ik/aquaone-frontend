import React, {Component} from "react";
import {connect} from 'react-redux'
import {Link} from "react-router-dom";

import Layout from 'conteiners/layout';
import Sidebar from 'components/sidebar';
import Banner from 'components/banner';
import {fetchProducts, fetchCategories, addProductToBasket, fetchProductsByCategoryId} from 'actions';

import {getProducts} from "../../selectors";



class Products extends Component {
    componentDidMount() {
        this.props.fetchProducts();
        this.props.fetchCategories();
    }

    renderProduct(product, index) {
        const {addProductToBasket} = this.props;
        return (

            <div className="col-xs-6 col-sm-4 col-md-4 col-lg-3 product-item" key={index}>
                <div className="product-images">
                    <a href="#" className="hover-images effect"><img
                        src="/img/products/shortshirt.jpg" alt="photo" className="img-reponsive"/></a>
                    <a href="#" className="btn-add-wishlist ver2"><i className="icon-heart"></i></a>
                    <a href="#" className="btn-quickview">Быстрый просмотр</a>
                </div>
                <div className="product-info-ver2">
                    <h3 className="product-title">
                        <Link to={`/products/${product.id}`}>{product.name}</Link>
                    </h3>
                    <div className="product-after-switch">
                        <div className="product-price">{product.price} рублей</div>
                        <div className="product-after-button">
                            <a  className="addcart" onClick={()=> addProductToBasket(product.id)}>Купить</a>
                        </div>
                    </div>
                    <div className="rating-star">
                        <span className="star star-5"></span>
                        <span className="star star-4"></span>
                        <span className="star star-3"></span>
                        <span className="star star-2"></span>
                        <span className="star star-1"></span>
                    </div>
                    <p className="product-desc">Compellingly brand enterprise value after
                        functional manufactured products. Synergistically morph process-centric
                        intellectual capital rather than extensible catalysts for change.
                        Credibly aggregate progressive initiatives and long-term.</p>
                    <div className="product-price">$292.00</div>
                    <div className="button-group">
                        <a className="button add-to-cart" onClick={()=> addProductToBasket(product.id)}>Купить</a>
                        <a className="button add-to-wishlist">Add to wishlist</a>
                        <a href="#" className="button add-view">Quick view</a>
                    </div>
                </div>
            </div>

        )
    }

    render() {
        const {products} = this.props;

        return(
            <Layout>
                <Banner/>
                <div className="container container-42 shop-sidebar">
                    <div className="row">
                        <Sidebar/>
                    <div className="col-md-9 col-sm-9 collection-list">
                      <div className="product-standard product-grid">
                        <div className="tab-content">
                            <div id="all" className="tab-pane fade in active">
                                <div className="row">
                                    {products.map((product, index) => this.renderProduct(product, index))}
                                </div>
                                {/*<div className="pagination-container pagination-blog button-v v2">
                                    <nav>
                                        <ul className="pagination">
                                            <li><a className="active" href="#">1</a></li>
                                            <li><a href="#">2</a></li>
                                            <li><a href="#">3</a></li>
                                            <li>
                                                <a href="#" aria-label="Previous">
                                                    <i className="fa fa-angle-right" aria-hidden="true"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>*/}
                            </div>
                        </div>
                    </div>
                </div>
                    </div>
                </div>

            </Layout>
        )
    }

    }


const mapStateToProps = (state, ownProps) => ({
    products: getProducts(state, ownProps),
});

const mapDispatchToProps = {
    fetchProducts,
    fetchCategories,
    addProductToBasket,

};
export default connect(mapStateToProps, mapDispatchToProps, null, { pure: false })(Products);