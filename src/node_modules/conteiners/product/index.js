import React, {Component} from "react";
import {connect} from 'react-redux';
import * as R from 'ramda';
import {Link} from "react-router-dom";

import {getProductById} from "selectors";
import {fetchProductById, addProductToBasket} from 'actions';
import Layout from 'conteiners/layout';


class Product extends Component {
    componentDidMount() {
        console.log('props', this.props);
        this.props.fetchProductById(this.props.match.params.id);
    }

    renderProduct() {
        const {product, addProductToBasket} = this.props;
        return (
            <div>
                <br></br>
                <div className="col-xs-12 col-sm-5 col-md-6">
                     <div className="product-images">
                                    <div className="main-img js-product-slider">
                                        <a href="#" className="hover-images effect"><img src="/img/bottle2.jpg"
                                                                                         alt="photo"
                                                                                         className="img-reponsive"/></a>
                                    </div>
                                </div>
                    <div className="multiple-img-list-ver2 js-click-product">
                        <div className="product-col">
                            <div className="img active">
                                <img src="/img/bottle.jpg" alt="images" className="img-responsive"/>
                            </div>
                        </div>
                        <div className="product-col">
                            <div className="img">
                                <img src="/img/bottle_3.jpg" alt="images" className="img-responsive"/>
                            </div>
                        </div>
                        <div className="product-col">
                            <div className="img">
                                <img src="/img/bottle2.jpg" alt="images" className="img-responsive"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div className="col-xs-12 col-sm-7 col-md-6">
                    <div className="single-product-info">
                        <div className="rating-star">
                            <div className="icon-rating"><span className="star star-5"></span>
                                <span className="star star-4"></span>
                                <span className="star star-3"></span>
                                <span className="star star-2"></span>
                                <span className="star star-1"></span>
                            </div>
                            <span className="review">(1 customer review)</span>
                        </div>
                        <h3 className="product-title"><a href="#">{product.name}</a></h3>
                        <div className="product-price">
                            <span className="old">{product.price}</span>
                            <span>{product.price}</span>
                        </div>
                        <p className="product-desc">{product.description}
                        </p>
                         <div className="action v2">
                                        <a className="link-ver1 add-cart"
                                        onClick={() => addProductToBasket(product.id)}>Купить</a>
                                        {/*<a href="#" className="link-ver1 wish"><i className="icon-heart f-15"></i></a>*/}
                                        <div className="clearfix"></div>
                         </div>
                        <div className="share-social">
                            <span>Share :</span>
                            <a href="#"><i className="fa fa-twitter"></i></a>
                            <a href="#"><i className="fa fa-facebook"></i></a>
                            <a href="#"><i className="fa fa-google-plus"></i></a>
                            <a href="#"><i className="fa fa-pinterest-p"></i></a>
                        </div>
                    </div>
                </div>
            </div>

        )

    }

    render() {
        console.log('product', this.props.product);
        const {product} = this.props;

        return (
            <Layout>
                <div className="container">
                    <div className="single-product-detail product-bundle product-aff">
                        <div className="row">
                            {product && this.renderProduct()}
                        </div>
                    </div>
                    <div className="single-product-tab">
                        <ul className="nav nav-tabs text-center">
                            <li className="active"><a data-toggle="pill" href="#desc">Описание</a></li>
                            <li><a data-toggle="pill" href="#info">Дополнительная информация</a></li>
                            <li><a data-toggle="pill" href="#review">Отзывы</a></li>
                        </ul>
                        <div className="tab-content">
                            <div id="desc" className="tab-pane fade in active">
                                <p className="p-center">Самая лучшая питьевая вода. Оптимальный выбор. Подходит для офисов и дома.
                                    Добывается из природных источников.</p>
                            </div>
                            <div id="info" className="tab-pane fade in">
                                <p className="p-center">Constructed in cotton sweat fabric, this lovely piece, lacus eu
                                    mattis auctor, dolor lectus venenatis nulla, at tristique eros sem vel ante. Sed leo
                                    enim, iaculis ornare tristique non, vulputate sit amet ante. Mauris placerat
                                    eleifend leo.</p>
                            </div>
                            <div id="review" className="tab-pane fade in ">
                                <p className="p-center">Constructed in cotton sweat fabric, this lovely piece, lacus eu
                                    mattis auctor, dolor lectus venenatis nulla, at tristique eros sem vel ante. Sed leo
                                    enim, iaculis ornare tristique non, vulputate sit amet ante. Mauris placerat
                                    eleifend leo.</p>
                            </div>
                        </div>
                    </div>
                </div>


            </Layout>

        )
    }

}

const mapStateToProps = state =>{
    return {
        product: getProductById(state, state.productPage.id)
    }
};

const mapDispatchToProps = {
    fetchProductById,
    addProductToBasket
};


export default connect(mapStateToProps, mapDispatchToProps, null, { pure: false })(Product);